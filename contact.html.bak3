<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y638Y5ZJGN"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-Y638Y5ZJGN');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Liam West</title>
    <link rel="stylesheet" href="/src/styles/base.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
</head>

<body>
    <!-- Background Animation -->
    <div class="background-animation">
        <div class="background-gradient"></div>
        <div class="gradient-orb gradient-orb-1"></div>
        <div class="gradient-orb gradient-orb-2"></div>
        <div class="gradient-orb gradient-orb-3"></div>
        <div class="grid-pattern"></div>
        <div class="dot-pattern"></div>
    </div>

    <!-- Header Container -->
    <div id="header-container"></div>

    <!-- Main Content -->
    <main>
        <!-- Contact Section -->
        <section id="contact" class="section" style="background: var(--secondary); padding-top: 5rem; min-height: calc(100vh - 4rem);">
            <div class="container">
                <div class="text-center" style="margin-bottom: 3rem;">
                    <h2 id="contact-main-text" style="font-size: 2rem; font-weight: var(--font-weight-bold); margin-bottom: 1rem;">Get In Touch</h2>
                    <p id="contact-subtext" class="text-muted" style="max-width: 42rem; margin: 0 auto;">
                        Interested in engineering projects, VR development, or collaboration opportunities? Let's connect and discuss how we can work together.
                    </p>
                </div>

                <!-- Centered Contact Form -->
                <div style="max-width: 600px; margin: 0 auto 3rem;">
                    <div class="contact-info-card">
                        <form id="contact-form" action="https://api.web3forms.com/submit" method="POST">
                            <input type="hidden" name="access_key" value="c41410e3-095d-4459-adf5-862bc0669f09">
                            <input type="hidden" name="subject" value="New Contact Form Submission">
                            <input type="checkbox" name="botcheck" style="display: none;">

                            <div class="form-group">
                                <label for="name">Name</label>
                                <input
                                    type="text"
                                    id="name"
                                    name="name"
                                    class="input"
                                    placeholder="Your Name"
                                    required
                                />
                            </div>

                            <div class="form-group">
                                <label for="email">Email</label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    class="input"
                                    placeholder="your.email@example.com"
                                    required
                                />
                            </div>

                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea
                                    id="message"
                                    name="message"
                                    class="textarea"
                                    rows="6"
                                    placeholder="Tell me about your project or opportunity you'd like to discuss..."
                                    required
                                ></textarea>
                            </div>

                            <button type="submit" class="button button-primary button-lg button-full">
                                Send Message
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Success Modal -->
                <div id="success-modal" class="modal" style="display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(4px); z-index: 1000; align-items: center; justify-content: center; padding: 1rem;">
                    <div class="modal-content" style="background: var(--card); border-radius: var(--radius-xl); padding: 3rem; text-align: center; max-width: 28rem; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); transform: scale(0.95); transition: transform 0.3s ease;">
                        <img id="success-modal-image" src="" alt="" style="display: none; width: 100%; max-width: 200px; height: auto; margin: 0 auto 1.5rem; border-radius: var(--radius-lg);">
                        <div class="modal-icon" style="width: 4rem; height: 4rem; margin: 0 auto 1.5rem; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; color: white;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                        </div>
                        <h3 style="font-size: 1.5rem; font-weight: var(--font-weight-bold); margin-bottom: 0.75rem; color: var(--card-foreground);">Message Sent!</h3>
                        <p style="color: var(--muted-foreground); margin-bottom: 2rem; line-height: 1.6;">Thanks for reaching out. I'll get back to you soon.</p>
                        <button class="button button-primary" onclick="document.getElementById('success-modal').style.display='none'; document.querySelector('#success-modal .modal-content').style.transform='scale(0.95)';">Close</button>
                    </div>
                </div>

                <!-- Location and Connect Side by Side -->
                <div style="max-width: 600px; margin: 0 auto;">
                    <div style="display: flex; gap: 2rem;">
                        <!-- Location Card -->
                        <div class="contact-info-card" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; min-height: 180px; flex: 1;">
                            <div class="contact-icon" style="margin-bottom: 1rem;">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                            </div>
                            <h3 style="margin-bottom: 0.5rem; font-size: clamp(1.25rem, 4vw, 1.5rem);">Location</h3>
                            <p id="contact-location" style="margin: 0;">Frisco, Texas</p>
                        </div>

                        <!-- Social Links Card -->
                        <div class="contact-info-card" style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; min-height: 180px; flex: 1;">
                            <h3 style="margin-bottom: 1.5rem; font-size: clamp(1.25rem, 4vw, 1.5rem); white-space: nowrap;">Connect With Me</h3>
                            <div class="social-buttons" style="justify-content: center;">
                                <a id="linkedin-link" href="https://www.linkedin.com/in/liam-west-/" target="_blank" class="button button-outline button-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                        <rect x="2" y="9" width="4" height="12"></rect>
                                        <circle cx="4" cy="4" r="2"></circle>
                                    </svg>
                                </a>
                                <a id="email-link" href="#" data-email-user="liamwest987" data-email-domain="gmail.com" class="button button-outline button-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <rect x="2" y="4" width="20" height="16" rx="2"></rect>
                                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                                    </svg>
                                </a>
                                <a id="resume-link" href="/pdfs/resume.pdf" class="button button-outline button-icon" download>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                        <polyline points="14 2 14 8 20 8"></polyline>
                                        <line x1="16" y1="13" x2="8" y2="13"></line>
                                        <line x1="16" y1="17" x2="8" y2="17"></line>
                                        <polyline points="10 9 9 9 8 9"></polyline>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer Container -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script type="module" src="/src/js/theme-manager.js"></script>
    <script src="/src/js/script.js"></script>

    <script type="module">
        import { fetchContact } from '/src/js/sanity.js';

        // Load contact data from Sanity
        async function loadContactData() {
            try {
                const contact = await fetchContact();
                if (contact) {
                    // Update main text and subtext
                    document.getElementById('contact-main-text').textContent = contact.mainText;
                    document.getElementById('contact-subtext').textContent = contact.subtext;

                    // Update location
                    document.getElementById('contact-location').textContent = contact.location;

                    // Update LinkedIn link
                    document.getElementById('linkedin-link').href = contact.linkedinUrl;

                    // Update email link with obfuscation
                    const emailLink = document.getElementById('email-link');
                    const [user, domain] = contact.email.split('@');
                    emailLink.setAttribute('data-email-user', user);
                    emailLink.setAttribute('data-email-domain', domain);

                    // Update resume link
                    if (contact.resume) {
                        document.getElementById('resume-link').href = contact.resume;
                    }

                    // Update success modal image
                    if (contact.successImage) {
                        const modalImage = document.getElementById('success-modal-image');
                        const modalIcon = document.querySelector('#success-modal .modal-icon');
                        modalImage.src = contact.successImage;
                        modalImage.style.display = 'block';
                        if (modalIcon) modalIcon.style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Error loading contact data:', error);
            }
        }

        // Load contact data on page load
        loadContactData();
    </script>

    <script>
        // Active nav link highlighting
        document.addEventListener("DOMContentLoaded", function () {
            const navLinks = document.querySelectorAll(".nav-links a");
            let currentPage = window.location.pathname.split("/").pop().replace(".html", "");

            if (currentPage === "") {
                currentPage = "home";
            }

            navLinks.forEach(link => {
                let linkHref = link.getAttribute("href").replace(".html", "");
                let linkPage = linkHref.split("/").pop();

                if (linkPage === "") {
                    linkPage = "home";
                }

                if (linkPage === currentPage) {
                    link.classList.add("active");
                } else {
                    link.classList.remove("active");
                }
            });

            // Contact form submission with Web3Forms
            const contactForm = document.getElementById('contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', async function(e) {
                    e.preventDefault();

                    const formData = new FormData(contactForm);
                    const submitButton = contactForm.querySelector('button[type="submit"]');
                    const originalText = submitButton.textContent;

                    try {
                        submitButton.textContent = 'Sending...';
                        submitButton.disabled = true;

                        const response = await fetch('https://api.web3forms.com/submit', {
                            method: 'POST',
                            body: formData
                        });

                        const data = await response.json();

                        if (data.success) {
                            const modal = document.getElementById('success-modal');
                            modal.style.display = 'flex';
                            setTimeout(() => {
                                modal.querySelector('.modal-content').style.transform = 'scale(1)';
                            }, 10);
                            contactForm.reset();
                        } else {
                            alert('Oops! Something went wrong. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error:', error);
                        alert('Oops! Something went wrong. Please try again.');
                    } finally {
                        submitButton.textContent = originalText;
                        submitButton.disabled = false;
                    }
                });
            }

            // Email obfuscation - reconstruct mailto link on click
            const emailLink = document.getElementById('email-link');
            if (emailLink) {
                emailLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    const user = this.getAttribute('data-email-user');
                    const domain = this.getAttribute('data-email-domain');
                    window.location.href = 'mailto:' + user + '@' + domain;
                });
            }
        });

        // Remove .html from URL
        if (window.location.pathname.includes(".html")) {
            const newPath = window.location.pathname.replace(/\.html+/g, "");
            window.history.replaceState(null, "", newPath);
        }
    </script>
</body>
</html>
